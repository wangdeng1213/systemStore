(function(a){a.fn.autoMail=function(b){var c=a.extend({},a.fn.autoMail.defaults,b);return this.each(function(){var j=a(this);var d=a.meta?a.extend({},c,j.data()):c;var k=j.offset().top+j.height()+6;var e=j.offset().left;var i=a('<div id="mailBox" style="top:'+k+"px;left:"+e+"px;width:"+j.width()+'px"></div>');a("body").append(i);function h(m){a("#mailBox li").removeClass("cmail").eq(m).addClass("cmail")}var f=d.emails;var l=function(m){m.attr("autocomplete","off");if(m.val()!=""){var o="<p>请选择邮箱类型</p><ul>";for(var n=0;n<f.length;n++){o+="<li>"+m.val()+"@"+f[n]+"</li>"}o+="</ul>";i.html(o).show(0)}else{i.hide(0)}a("#mailBox li").hover(function(){a("#mailBox li").removeClass("cmail");a(this).addClass("cmail")},function(){a(this).removeClass("cmail")}).click(function(){m.val(a(this).html());i.hide(0)})};var g=-1;j.focus(function(){if(j.val().indexOf("@")==-1){l(j)}else{i.hide(0)}}).blur(function(){setTimeout(function(){i.hide(0)},1000)}).keyup(function(m){if(j.val().indexOf("@")==-1){if(m.keyCode==40){g++;if(g>=a("#mailBox li").length){g=0}h(g)}else{if(m.keyCode==38){g--;if(g<0){g=a("#mailBox li").length-1}h(g)}else{if(m.keyCode==13){if(g>=0){j.val(a("#mailBox li").eq(g).html());i.hide(0)}}else{g=-1;l(j)}}}}else{i.hide(0)}}).keydown(function(m){if(m.keyCode==13){return false}})})};a.fn.autoMail.defaults={emails:[]}})(jQuery);