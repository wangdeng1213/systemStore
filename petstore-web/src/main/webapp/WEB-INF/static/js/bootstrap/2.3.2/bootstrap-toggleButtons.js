!function(b){var a=function(f,g,e){var c=0,d=g.length;for(;c<d;c++){f=f[g[c]]=f[g[c]]||c==(d-1)?e:{}}};b.fn.toggleButtons=function(h){var d,c,g,f=0.05,e={init:function(i){this.each(function(){var n,o,m,j,l={};d=b(this);d.addClass("toggle-button");b.each(d.data(),function(r,s){var q,p={};if(r.indexOf("togglebutton")===0){q=r.match(/[A-Z][a-z]+/g);q=b.map(q,function(t){return(t.toLowerCase())});a(p,q,s);l=b.extend(true,l,p)}});m=b.extend(true,{},b.fn.toggleButtons.defaults,i,l);b(this).data("options",m);n=b("<span></span>").addClass("labelLeft").text(m.label.enabled===undefined?"ON":m.label.enabled);o=b("<span></span>").addClass("labelRight").text(m.label.disabled===undefined?"OFF ":m.label.disabled);g=d.find("input:checkbox");c=g.wrap(b("<div></div>")).parent();c.append(n);c.append(b("<label></label>").attr("for",g.attr("id")||""));c.append(o);if(g.is(":checked")){d.find(">div").css("left","0")}else{d.find(">div").css("left","-50%")}if(m.animated){if(m.transitionspeed!==undefined){if(/^(\d*%$)/.test(m.transitionspeed)){f=0.05*parseInt(m.transitionspeed)/100}else{f=m.transitionspeed}}}else{f=0}b(this).data("transitionSpeed",f*1000);m.width/=2;d.css("width",m.width*2).find(">div").css("width",m.width*3).find(">span, >label").css("width",m.width);d.css("height",m.height).find("span, label").css("height",m.height).filter("span").css("line-height",m.height+"px");if(g.is(":disabled")){b(this).addClass("deactivate")}d.find("span").css(m.font);if(m.style.enabled===undefined){if(m.style.custom!==undefined&&m.style.custom.enabled!==undefined&&m.style.custom.enabled.background!==undefined){n.css("color",m.style.custom.enabled.color);if(m.style.custom.enabled.gradient===undefined){n.css("background",m.style.custom.enabled.background)}else{b.each(["-webkit-","-moz-","-o-",""],function(p,q){n.css("background-color",m.style.custom.enabled.background);n.css("background-image",q+"linear-gradient(top, "+m.style.custom.enabled.background+","+m.style.custom.enabled.gradient+")")})}}}else{n.addClass(m.style.enabled)}if(m.style.disabled===undefined){if(m.style.custom!==undefined&&m.style.custom.disabled!==undefined&&m.style.custom.disabled.background!==undefined){o.css("color",m.style.custom.disabled.color);if(m.style.custom.disabled.gradient===undefined){o.css("background",m.style.custom.disabled.background)}else{b.each(["-webkit-","-moz-","-o-",""],function(p,q){o.css("background-color",m.style.custom.disabled.background);o.css("background-image",q+"linear-gradient(top, "+m.style.custom.disabled.background+","+m.style.custom.disabled.gradient+")")})}}}else{o.addClass(m.style.disabled)}var k=function(p){p.siblings("label").trigger("mousedown").trigger("mouseup").trigger("click")};n.on("click",function(p){k(b(this))});o.on("click",function(p){k(b(this))});d.find("input:checkbox").on("change",function(t,q){var p=b(this).parent(),s=b(this).is(":checked"),r=b(this).closest(".toggle-button");p.stop().animate({left:s?"0":"-50%"},r.data("transitionSpeed"));m=r.data("options");if(!q){m.onChange(p,s,t)}});d.find("label").on("mousedown touchstart",function(p){j=false;p.preventDefault();p.stopImmediatePropagation();if(b(this).closest(".toggle-button").is(".deactivate")){b(this).off("click")}else{b(this).on("mousemove touchmove",function(t){var q=b(this).closest(".toggle-button"),r=(t.pageX||t.originalEvent.targetTouches[0].pageX)-q.offset().left,s=((r/(m.width*2))*100);j=true;t.stopImmediatePropagation();t.preventDefault();if(s<25){s=25}else{if(s>75){s=75}}q.find(">div").css("left",(s-75)+"%")});b(this).on("click touchend",function(r){var q=b(r.target),s=q.siblings("input:checkbox");r.stopImmediatePropagation();r.preventDefault();b(this).off("mouseleave");if(j){if(parseInt(b(this).parent().css("left"))<-25){s.attr("checked",false)}else{s.attr("checked",true)}}else{s.attr("checked",!s.is(":checked"))}s.trigger("change")});b(this).on("mouseleave",function(q){var r=b(this).siblings("input:checkbox");q.preventDefault();q.stopImmediatePropagation();b(this).off("mouseleave");b(this).trigger("mouseup");if(parseInt(b(this).parent().css("left"))<-25){r.attr("checked",false)}else{r.attr("checked",true)}r.trigger("change")});b(this).on("mouseup",function(q){q.stopImmediatePropagation();q.preventDefault();b(this).off("mousemove")})}})});return this},toggleActivation:function(){b(this).toggleClass("deactivate")},toggleState:function(i){var j=b(this).find("input:checkbox");j.attr("checked",!j.is(":checked")).trigger("change",i)},setState:function(j,i){b(this).find("input:checkbox").attr("checked",j).trigger("change",i)},status:function(){return b(this).find("input:checkbox").is(":checked")},destroy:function(){var i=b(this).find("div"),j;i.find(":not(input:checkbox)").remove();j=i.children();j.unwrap().unwrap();j.unbind("change");return j}};if(e[h]){return e[h].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof h==="object"||!h){return e.init.apply(this,arguments)}else{b.error("Method "+h+" does not exist!")}}};b.fn.toggleButtons.defaults={onChange:function(){},width:100,height:25,font:{},animated:true,transitionspeed:undefined,label:{enabled:undefined,disabled:undefined},style:{enabled:undefined,disabled:undefined,custom:{enabled:{background:undefined,gradient:undefined,color:"#FFFFFF"},disabled:{background:undefined,gradient:undefined,color:"#FFFFFF"}}}}}(jQuery);